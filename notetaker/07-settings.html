<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Page 7 – Settings | Voice Notes AI</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brand: {50:'#eff6ff',100:'#dbeafe',200:'#bfdbfe',300:'#93c5fd',400:'#60a5fa',500:'#3b82f6',600:'#2563eb',700:'#1d4ed8',800:'#1e40af',900:'#1e3a8a'} },
          boxShadow: { soft: '0 10px 30px -10px rgba(0,0,0,0.15)' }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    html { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial; }
    .scroll-slim { scrollbar-width: thin; }
    .scroll-slim::-webkit-scrollbar { height: 8px; width: 8px; }
    .scroll-slim::-webkit-scrollbar-thumb { background: rgba(30,64,175,.35); border-radius: 8px; }
    .tab-btn[aria-selected="true"]{ background:#eef2ff; color:#1e40af; border-color:#bfdbfe; }
  </style>
</head>
<body class="bg-gradient-to-br from-brand-50/70 via-white to-brand-100/40 text-slate-800">
  <div class="min-h-screen grid grid-cols-1 lg:grid-cols-[280px_1fr]">
    <!-- Sidebar -->
    <aside class="bg-white/80 backdrop-blur sticky top-0 h-full lg:h-screen border-r border-slate-200 shadow-soft hidden lg:flex flex-col">
      <div class="px-5 pt-6 pb-4 flex items-center gap-3">
        <div class="h-10 w-10 grid place-items-center rounded-xl bg-brand-600 text-white font-bold">VN</div>
        <div>
          <div class="text-sm uppercase tracking-wider text-brand-700 font-semibold">Voice Notes AI</div>
          <div class="text-xs text-slate-500">Otter-like Transcription</div>
        </div>
      </div>
      <nav class="mt-4 flex-1 overflow-y-auto scroll-slim">
        <ul class="px-3 space-y-1 text-sm">
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="02-dashboard.html">Dashboard</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="03-record.html">Record</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="04-transcript.html">Transcript</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="05-search.html">Search</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="06-uploads.html">Uploads</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg bg-brand-50 text-brand-700 font-medium" href="07-settings.html">Settings</a></li>
          <li class="pt-2"><div class="px-3 text-xs uppercase tracking-wide text-slate-400">More</div></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="08-billing.html">Billing</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="09-team.html">Team</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="10-calendar.html">Calendar</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="11-integrations.html">Integrations</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="12-bot.html">Meeting Bot</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="13-analytics.html">Analytics</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="14-admin.html">Admin</a></li>
          <li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="15-help.html">Help</a></li>
          <li class="pt-2"><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-brand-50" href="01-auth.html">Sign in / out</a></li>
        </ul>
      </nav>
      <div class="p-4 mt-auto">
        <div class="rounded-xl bg-gradient-to-br from-brand-600 to-brand-800 text-white p-4">
          <div class="text-sm opacity-90">Minutes used</div>
          <div class="mt-1 flex items-end gap-2"><div class="text-2xl font-semibold">382</div><div class="text-xs opacity-80">/ 600</div></div>
          <div class="mt-3 h-2 bg-white/20 rounded-full overflow-hidden"><div class="h-full w-[64%] bg-white/90"></div></div>
          <a href="08-billing.html" class="mt-3 inline-flex items-center gap-2 text-xs font-medium underline">Upgrade plan →</a>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="flex flex-col min-h-screen">
      <!-- Topbar -->
      <header class="sticky top-0 z-10 backdrop-blur bg-white/70 border-b border-slate-200">
        <div class="px-4 lg:px-8 py-3 flex items-center gap-3">
          <h1 class="text-lg md:text-xl font-semibold text-slate-900">Settings</h1>
          <div class="ml-auto flex items-center gap-2 text-sm">
            <a href="03-record.html" class="hidden sm:inline-flex items-center gap-2 rounded-xl bg-brand-600 text-white px-3 py-1.5 shadow-soft hover:bg-brand-700">New recording</a>
            <a href="07-settings.html" class="inline-flex items-center gap-2 p-1.5 rounded-full border border-slate-200 hover:bg-brand-50"><img id="header_profilePic" alt="avatar" src="https://i.pravatar.cc/40?img=5" class="h-8 w-8 rounded-full" /></a>
          </div>
        </div>
      </header>

      <!-- Content -->
      <section class="flex-1 px-4 lg:px-8 py-6">
        <!-- Tabs -->
        <div class="rounded-2xl border border-slate-200 bg-white/80 shadow-soft">
          <div class="px-4 py-3 border-b flex flex-wrap items-center gap-2">
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="profile" aria-selected="true">Profile</button>
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="preferences">Preferences</button>
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="vocab">Custom vocabulary</button>
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="notifications">Notifications</button>
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="shortcuts">Shortcuts</button>
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="devices">Devices</button>
            <button class="tab-btn px-3 py-1.5 rounded-lg border text-sm" data-tab="privacy">Privacy</button>
          </div>

          <!-- Panels -->
          <div class="p-4 space-y-6">
            <!-- Profile -->
            <section id="panel-profile">
              <h2 class="font-semibold">Profile</h2>
              <div class="mt-3 grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="md:col-span-2 rounded-xl border p-4 bg-white">
                  <form id="profile-form" class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
                    <label class="block">
                      <span class="text-slate-600">Full name</span>
                      <input id="profile_fullname" class="mt-1 w-full rounded-lg border px-3 py-2" value="You"/>
                    </label>
                    <label class="block">
                      <span class="text-slate-600">Email</span>
                      <input id="profile_email" class="mt-1 w-full rounded-lg border px-3 py-2" value="you@example.com"/>
                    </label>
                    <label class="block">
                      <span class="text-slate-600">Organization</span>
                      <input id="profile_org" class="mt-1 w-full rounded-lg border px-3 py-2" placeholder="Company"/>
                    </label>
                    <label class="block">
                      <span class="text-slate-600">Time zone</span>
                      <select id="profile_timezone" class="mt-1 w-full rounded-lg border px-3 py-2">
                        <option value="IST">Asia/Kolkata (IST)</option>
                        <option value="UTC">UTC</option>
                        <option value="PST">America/Los_Angeles (PT)</option>
                      </select>
                    </label>
                  
                  <div class="mt-4 flex items-center gap-2">
                    <button class="px-4 py-2 rounded-xl bg-brand-600 text-white">Save</button>
                    <button class="px-4 py-2 rounded-xl border">Cancel</button>
                  </div>
                  </form>
                </div>
                  <form id="uploadForm" class="rounded-xl border p-4 bg-white">
                    <div  class="flex items-center gap-3">
                      <img id="profile-img" class="h-12 w-12 rounded-full" src="https://i.pravatar.cc/80?img=5" alt="avatar"/>
                      <div>
                        <div class="font-medium">Your avatar</div>
                        <div class="text-xs text-slate-500">PNG/JPG up to 2MB</div>
                        <input class="my-2 w-48 p-2 text-sm border border-gray-300 rounded" id="file" type="file" accept="image/*"  required />
                      </div>
                    </div>
                  <div id="status"></div>
                    <div class="mt-3 flex items-center gap-2 text-sm">
                      <button id="profile_pic_upload" class="px-3 py-1.5 rounded-lg border">Upload</button>
                      <button id="profile_pic_remove" class="px-3 py-1.5 rounded-lg border">Remove</button>
                    </div>
                  </form>
              </div>
              </div>
            </section>

            <!-- Preferences -->
            <section id="panel-preferences" class="hidden">
              <h2 class="font-semibold">Preferences</h2>
              <form id="preference-form" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="rounded-xl border p-4 bg-white space-y-3 text-sm">
                  <div  class="flex items-center justify-between">
                    <span class="text-slate-700">Default language</span>
                    <select  id="preference_langauge" class="rounded-lg border px-2 py-1">
                      <option value="en-us">English (US)</option>
                      <option value="en-in" selected>English (India)</option>
                      <option value="hindi">Hindi (India)</option>
                      <option value="tamil">Tamil (India)</option>
                    </select>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Auto-punctuation</span>
                    <input id="preference_punctuation" type="checkbox" class="toggle" checked>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Speaker diarization</span>
                    <input id="preference_diarization" type="checkbox" class="toggle" checked>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Show word timestamps</span>
                    <input id="preference_timestamps" type="checkbox" class="toggle" checked>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Theme</span>
                    <select id="preference_Theme" class="rounded-lg border px-2 py-1">
                      <option value="light" selected>Light (Blue)</option>
                      <option value="dark">Dark</option>
                      <option value="system">System</option>
                    </select>
                  </div>
                </div>
                <div class="rounded-xl border p-4 bg-white text-sm space-y-3">
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Skip silence on playback</span>
                    <input id="preference_playback" type="checkbox" class="toggle">
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Auto-start recording page</span>
                    <input id="preference_recording" type="checkbox" class="toggle">
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Auto-open summary panel</span>
                    <input id="preference_summary" type="checkbox" class="toggle" checked>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-700">Default export format</span>
                    <select id="preference_format" class="rounded-lg border px-2 py-1">
                      <option value=".txt">.txt</option>
                      <option value=".docx" selected>.docx</option>
                      <option value=".pdf">.pdf</option>
                      <option value=".srt">.srt</option>
                    </select>
                  </div>
                </div>
                <div class="mt-4 flex items-center gap-2">
                    <button class="px-4 py-2 rounded-xl bg-brand-600 text-white">Save</button>
                    <button class="px-4 py-2 rounded-xl border">Cancel</button>
                  </div>
              </form>
            </section>

            <!-- Vocabulary -->
            <section id="panel-vocab" class="hidden">
              <h2 class="font-semibold">Custom vocabulary</h2>
              <div class="mt-3 grid grid-cols-1 lg:grid-cols-[1fr_340px] gap-4">
                <div class="rounded-xl border p-4 bg-white">
                  <form id="vocabulary-form" class="flex items-center gap-2">
                    <input id="termInput" type="text" class="flex-1 rounded-lg border px-3 py-2 text-sm" placeholder="Add names, jargon, product terms… e.g., Zoho, Urapakkam, raga"/>
                    <button id="addTerm" class="px-3 py-2 rounded-xl bg-brand-600 text-white text-sm">Add</button>
                  </form>
                  <div id="terms" class="mt-3 flex flex-wrap gap-2 text-sm">
                    <!-- <span class="term px-2 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">Otter</span>
                    <span class="term px-2 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">diarization</span>
                    <span class="term px-2 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">IST</span> -->
                  </div>
                  <div class="mt-4 flex items-center gap-2 text-sm">
                    <button id="exportTerms" class="px-3 py-1.5 rounded-lg border">Export .json</button>
                    <label class="px-3 py-1.5 rounded-lg border cursor-pointer">Import .json
                      <input id="importTerms" type="file" accept=".json" class="hidden" />
                    </label>
                    <button id="clearTerms" class="px-3 py-1.5 rounded-lg border">Clear all</button>
                  </div>
                </div>
                <div class="rounded-xl border p-4 bg-white">
                  <div class="font-medium">Tips</div>
                  <ul class="mt-2 list-disc pl-5 text-sm text-slate-700">
                    <li>One word or short phrase per entry.</li>
                    <li>Add names and domain-specific terms to boost accuracy.</li>
                    <li>Case-insensitive; avoid duplicates.</li>
                  </ul>
                </div>
              </div>
            </section>

            <!-- Notifications -->
            <section id="panel-notifications" class="hidden">
              <h2 class="font-semibold">Notifications</h2>
              <form id="notifications-form" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div class="rounded-xl border p-4 bg-white space-y-3">
                  <div class="flex items-center justify-between"><span>Recording finished</span><input id="notifications_Recording" type="checkbox" class="toggle" checked></div>
                  <div class="flex items-center justify-between"><span>Transcript ready</span><input id="notifications_Transcript" type="checkbox" class="toggle" checked></div>
                  <div class="flex items-center justify-between"><span>Mentions in comments</span><input id="notifications_Mentions" type="checkbox" class="toggle" checked></div>
                  <div class="flex items-center justify-between"><span>Shared with you</span><inpu id="notifications_Shared"t type="checkbox" class="toggle"></div>
                </div>
                <div class="rounded-xl border p-4 bg-white space-y-3">
                  <div class="flex items-center justify-between"><span>Email</span><input id="notifications_Email" type="checkbox" class="toggle" checked></div>
                  <div class="flex items-center justify-between"><span>Push (mobile)</span><input id="notifications_Push" type="checkbox" class="toggle" checked></div>
                  <div class="flex items-center justify-between"><span>Desktop</span><input id="notifications_Desktop" type="checkbox" class="toggle"></div>
                  <div class="flex items-center justify-between"><span>Weekly summary</span><input id="notifications_summary" type="checkbox" class="toggle"></div>
                </div>
                <div class="mt-4 flex items-center gap-2">
                    <button class="px-4 py-2 rounded-xl bg-brand-600 text-white">Save</button>
                    <button class="px-4 py-2 rounded-xl border">Cancel</button>
                  </div>
              </form>
            </section>

            <!-- Shortcuts -->
            <section id="panel-shortcuts" class="hidden">
              <h2 class="font-semibold">Keyboard shortcuts</h2>
              <div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="rounded-xl border p-4 bg-white">
                  <div class="grid grid-cols-2 gap-2 text-sm">
                    <div class="flex items-center justify-between border rounded-lg px-3 py-2"><span>Start/Stop</span><kbd class="px-2 py-1 rounded bg-slate-100 border">Space</kbd></div>
                    <div class="flex items-center justify-between border rounded-lg px-3 py-2"><span>Pause</span><kbd class="px-2 py-1 rounded bg-slate-100 border">P</kbd></div>
                    <div class="flex items-center justify-between border rounded-lg px-3 py-2"><span>Bookmark</span><kbd class="px-2 py-1 rounded bg-slate-100 border">B</kbd></div>
                    <div class="flex items-center justify-between border rounded-lg px-3 py-2"><span>Highlight</span><kbd class="px-2 py-1 rounded bg-slate-100 border">H</kbd></div>
                    <div class="flex items-center justify-between border rounded-lg px-3 py-2"><span>Find</span><kbd class="px-2 py-1 rounded bg-slate-100 border">Ctrl/⌘ F</kbd></div>
                    <div class="flex items-center justify-between border rounded-lg px-3 py-2"><span>Replace</span><kbd class="px-2 py-1 rounded bg-slate-100 border">Ctrl/⌘ R</kbd></div>
                  </div>
                </div>
                <div class="rounded-xl border p-4 bg-white">
                  <div class="font-medium">Try it</div>
                  <p class="text-sm text-slate-600">Focus the box and press a key combo. We'll show what we detected.</p>
                  <div id="tester" tabindex="0" class="mt-2 h-28 rounded-xl border-2 border-dashed grid place-items-center text-slate-500">Click here, then press keys</div>
                  <div id="pressed" class="mt-2 text-sm text-slate-700">—</div>
                </div>
              </div>
            </section>

            <!-- Devices -->
            <section id="panel-devices" class="hidden">
              <h2 class="font-semibold">Devices</h2>
              <form id="devices-form" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div class="rounded-xl border p-4 bg-white space-y-3">
                  <div class="text-slate-700 font-medium">Microphone</div>
                  <select id="devices_microphone" class="w-full rounded-lg border px-3 py-2">
                    <option value="default" selected>Default microphone</option>
                    <option value="external">External USB mic</option>
                  </select>
                  <div class="mt-2 h-3 rounded-full bg-slate-200 overflow-hidden"><div id="vu" class="h-full w-1/3 bg-brand-600"></div></div>
                  <div class="text-xs text-slate-500">Speak to test input levels.</div>
                </div>
                <div class="rounded-xl border p-4 bg-white space-y-3">
                  <div class="text-slate-700 font-medium">Speaker</div>
                  <select id="devices_speaker" class="w-full rounded-lg border px-3 py-2">
                    <option value="default" selected>Default output</option>
                    <option value="headphones">Headphones</option>
                  </select>
                  <button class="px-3 py-1.5 rounded-lg border">Play test sound</button>
                </div>
                <div class="mt-4 flex items-center gap-2">
                    <button class="px-4 py-2 rounded-xl bg-brand-600 text-white">Save</button>
                    <button class="px-4 py-2 rounded-xl border">Cancel</button>
                  </div>
              </form>
            </section>

            <!-- Privacy -->
            <section id="panel-privacy" class="hidden">
              <h2 class="font-semibold">Privacy & data</h2>
              <div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <form id="privacy-form" class="rounded-xl border p-4 bg-white space-y-3">
                  <div class="flex items-center justify-between"><span>Make new recordings private</span><input  id="privacy_recording" type="checkbox" class="toggle" checked></div>
                  <div class="flex items-center justify-between"><span>Allow link sharing by default</span><input id="privacy_sharing" type="checkbox" class="toggle"></div>
                  <div class="flex items-center justify-between"><span>Auto-delete trashed items</span><select id="privacy_trash" class="rounded-lg border px-2 py-1"><option>Never</option><option>30 days</option><option>60 days</option></select></div>
                  <div class="mt-4 flex items-center gap-2">
                    <button class="px-4 py-2 rounded-xl bg-brand-600 text-white">Save</button>
                    <button class="px-4 py-2 rounded-xl border">Cancel</button>
                  </div>
                </form>
                <div class="rounded-xl border p-4 bg-white space-y-3">
                  <div class="font-medium">Account data</div>
                  <button class="px-3 py-1.5 rounded-lg border">Export account data</button>
                  <button class="px-3 py-1.5 rounded-lg border">Delete account</button>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>

      <footer class="px-4 lg:px-8 py-6 text-xs text-slate-500">
        <div class="flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-between">
          <div>© 2025 Voice Notes AI</div>
          <div class="flex items-center gap-3">
            <a href="15-help.html" class="hover:underline">Help</a>
            <a href="#" class="hover:underline">Privacy</a>
            <a href="#" class="hover:underline">Terms</a>
          </div>
        </div>
      </footer>
    </main>
  </div>

  <!-- Minimal JS: tab switch, vocab chips, tester, fake VU -->
  <script>
    // Tab switching
    const tabs = document.querySelectorAll('.tab-btn');
    const panels = {
      profile: document.getElementById('panel-profile'),
      preferences: document.getElementById('panel-preferences'),
      vocab: document.getElementById('panel-vocab'),
      notifications: document.getElementById('panel-notifications'),
      shortcuts: document.getElementById('panel-shortcuts'),
      devices: document.getElementById('panel-devices'),
      privacy: document.getElementById('panel-privacy'),
    };
    function showTab(key){
      Object.values(panels).forEach(p=>p.classList.add('hidden'));
      panels[key].classList.remove('hidden');
      tabs.forEach(t=>t.setAttribute('aria-selected', String(t.dataset.tab===key)));
    }
    tabs.forEach(t=> t.addEventListener('click', ()=>showTab(t.dataset.tab)) );

    // Vocabulary chips
    const termInput = document.getElementById('termInput');
    const terms = document.getElementById('terms');
    // document.getElementById('addTerm').addEventListener('click', ()=>{
    //   const val = termInput.value.trim(); if(!val) return; termInput.value='';
    //   const chip = document.createElement('span');
    //   chip.className = 'term px-2 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200';
    //   chip.textContent = val;
    //   chip.title = 'Click to remove';
    //   chip.addEventListener('click', ()=>chip.remove());
    //   terms.appendChild(chip);
    // });
    document.getElementById('exportTerms').addEventListener('click', ()=>{
      const data = [...terms.querySelectorAll('.term')].map(x=>x.textContent);
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'vocabulary.json'; a.click();
    });
   

    // Shortcuts tester
    const tester = document.getElementById('tester');
    const pressed = document.getElementById('pressed');
    tester.addEventListener('keydown', (e)=>{
      e.preventDefault();
      const parts=[]; if(e.ctrlKey||e.metaKey) parts.push(navigator.platform.includes('Mac')?'⌘':'Ctrl'); if(e.altKey) parts.push('Alt'); if(e.shiftKey) parts.push('Shift');
      const key = e.key.length===1 ? e.key.toUpperCase() : e.key; parts.push(key);
      pressed.textContent = 'Detected: ' + parts.join(' + ');
    });

    // Fake input level animation
    const vu = document.getElementById('vu');
    setInterval(()=>{ vu.style.width = (20 + Math.random()*60) + '%'; }, 500);

    // Default to Profile tab on load
    showTab('profile');

    let vocabularies = [];

    // Update Profile
    const serverUrl = "https://server.albetora.com/";
    const user = "test";

    const fetchData =  async (url) =>
    {
      console.log("fetching data from URL: ", url)
       const res = await fetch(url);
        
        const data =  await res.json();
       return data.response;
    }

    const postData =  async (url, payload) =>
    {
      console.log("Posting data to URL: ", url);
      console.log("data: ", JSON.stringify(payload));
       const res = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
       body: JSON.stringify(payload)});
       
       console.log("Status code : " + res.ok);
        const data =  await res.json();

        return data.response;
      
    }


    const setProfileData = async function(data) {
      document.getElementById("profile_fullname").value = data.fullName;
      document.getElementById("profile_email").value = data.email;
      document.getElementById("profile_org").value = data.organization;
      document.getElementById("profile_timezone").value = data.timezone;
    }

    const setPreferenceData = async function(data) {
      document.getElementById("preference_langauge").value = data.langauge;
      document.getElementById("preference_punctuation").checked = data.punctuation;
      document.getElementById("preference_diarization").checked = data.diarization;
      document.getElementById("preference_timestamps").value = data.timestamps;
      document.getElementById("preference_Theme").value = data.Theme;
      document.getElementById("preference_playback").checked = data.playback;
      document.getElementById("preference_recording").checked = data.recording;
      document.getElementById("preference_summary").checked = data.summary;
      document.getElementById("preference_format").value = data.format;
    }

    const setNotificationsData = async function(data) {
      document.getElementById("notifications_Recording").checked = data.recording;
      document.getElementById("notifications_Transcript").checked = data.transcript;
      document.getElementById("notifications_Mentions").checked = data.mentions;
      document.getElementById("notifications_Shared").checked = data.shared;
      document.getElementById("notifications_Email").checked = data.email;
      document.getElementById("notifications_Push").checked = data.push;
      document.getElementById("notifications_Desktop").checked = data.desktop;
      document.getElementById("notifications_summary").checked = data.summary;
    }
    
    const setDevices = async function(data)
    {
      document.getElementById("devices_speaker").value= data.speaker;
      document.getElementById("devices_microphone").value= data.microphone;
    }

     const setPrivacy = async function(data)
    {
      document.getElementById("privacy_trash").value= data.trash;
      document.getElementById("privacy_sharing").checked= data.sharing;
      document.getElementById("privacy_recording").checked= data.recording;
    }

    const addVocabulary = async (text) => {
        console.log('Creating node for vocabulary: ', text)
        
        const chip = document.createElement('span');
        chip.className = 'term px-2 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200';
        chip.textContent = text;
        chip.title = 'Click to remove';
        chip.addEventListener('click', async ()=>{
          vocabularies=vocabularies.filter(voc => voc !== chip.textContent  );
          console.log("removed "+ chip.textContent +" from : " +vocabularies);
          chip.remove()

          let data = {}
            data.vocabulary = vocabularies;
          
            data.user = user;

          const addProfile = await postData(serverUrl+ "/api/settings/vocabulary", data);
          console.log("Post status: ", addProfile)
    
        });
        terms.appendChild(chip);
      }

    const setVocabulary = function(data) {
      console.log("Vocabulary data ", data)
       vocabularies= data.vocabulary;
      console.log("Received vocabulary ", vocabularies)
      terms.innerHTML = "";
      vocabularies.forEach(text => addVocabulary(text))
      
    }

     //get profile pic
    async function loadProfile() {
      try {
        const res = await fetch(serverUrl+'/api/settings/profile_pic?user='+user);
        const data = await res.json();

        if (data.profilePicture) {
          document.getElementById('profile-img').src = data.profilePicture;
          document.getElementById('header_profilePic').src = data.profilePicture;
        } else {
        }
      } catch (error) {
        console.error('Error fetching profile:', error);
      }
    }
    
   window.onload = async() => {

      await loadProfile();

      let getProfile = await fetchData(serverUrl+ "/api/settings/profile?user="+user);
      console.log("fetched Profile data : ", getProfile);
      await setProfileData(getProfile);

      let getPreference = await fetchData(serverUrl+ "/api/settings/preference?user="+user);
      console.log("fetched preference data : ", getPreference);
      await setPreferenceData(getPreference);

      let getVocabulary = await fetchData(serverUrl+ "/api/settings/vocabulary?user="+user);
      console.log("fetched vocabulary data : ", getVocabulary);
      await setVocabulary(getVocabulary);

      let getNotifications = await fetchData(serverUrl+'/api/settings/notifications?user='+user);
      console.log("fetched notifications data : ", getNotifications);
      await setNotificationsData(getNotifications);

      let getDevices = await fetchData(serverUrl+'/api/settings/devices?user='+user);
      console.log("fetched devices data : " ,getDevices);
      await setDevices(getDevices);

      let getPrivacy = await fetchData(serverUrl+'/api/settings/privacy?user='+user);
      console.log("fetched privacy data : " ,getPrivacy);
      await setPrivacy(getPrivacy);

    }



    document.getElementById("profile-form").addEventListener('submit', async e => {
       e.preventDefault();
       let data = {}
        data.fullName = document.getElementById("profile_fullname").value;
        data.email = document.getElementById("profile_email").value;
        data.organization = document.getElementById("profile_org").value;
        data.timezone = document.getElementById("profile_timezone").value;
        data.user = user;

       const addProfile = await postData(serverUrl+ "/api/settings/profile", data);
       console.log("Post status: ", addProfile)
    })

     document.getElementById("preference-form").addEventListener('submit', async e => {
       e.preventDefault();
       let data = {}
        data.langauge = document.getElementById("preference_langauge").value;
        data.punctuation = document.getElementById("preference_punctuation").checked;
        data.diarization = document.getElementById("preference_diarization").checked;
        data.timestamps = document.getElementById("preference_timestamps").checked;
        data.Theme = document.getElementById("preference_Theme").value;
        data.playback = document.getElementById("preference_playback").checked;
        data.recording = document.getElementById("preference_recording").checked;
        data.summary = document.getElementById("preference_summary").checked;
        data.format = document.getElementById("preference_format").value;
        data.user = user;
        
       const addProfile = await postData(serverUrl+ "/api/settings/preference", data);
       console.log("Post status: ", addProfile)
    })

    document.getElementById("vocabulary-form").addEventListener('submit', async e => {
       e.preventDefault();
       let data = {}
       let newVocabulary = document.getElementById("termInput").value;
       if(newVocabulary.trim() !== ""){
        console.log("Adding vocabulary ", newVocabulary)
         vocabularies.push(newVocabulary);
          data.vocabulary = vocabularies;
        
          data.user = user;

        const addProfile = await postData(serverUrl+ "/api/settings/vocabulary", data);
        console.log("Post status: ", addProfile)
        console.log("Setting vocab: ", vocabularies)
        setVocabulary(data);
        termInput.value="";
       }
    })

    document.getElementById('clearTerms').addEventListener('click', async()=>{ 
      let data = {};
      data.vocabulary = [];
      data.user = user;
      const addProfile = await postData(serverUrl+ "/api/settings/vocabulary", data);
      console.log("Post status: ", addProfile)
      setVocabulary(data);

    });

     document.getElementById('importTerms').addEventListener('change',  (e)=>{
      const file = e.target.files[0]; if(!file) return;
      const reader = new FileReader();
      reader.onload = async ()=>{
        try { const arr = JSON.parse(reader.result);
          console.log("Vocabulaories from file uplaod ", arr)
          vocabularies.push(...arr);
          let data = {};
          data.vocabulary = vocabularies;
        
          data.user = user;

        const addProfile = await postData(serverUrl+ "/api/settings/vocabulary", data);
        console.log("Post status: ", addProfile)

          setVocabulary({vocabulary: vocabularies});
        } catch(err){ alert('Invalid JSON'); }
      };
      reader.readAsText(file);
    });

    document.getElementById("notifications-form").addEventListener('submit', async e => {
       e.preventDefault();
       let data = {}
        data.recording = document.getElementById("notifications_Recording").checked;
        data.transcript = document.getElementById("notifications_Transcript").checked;
        data.mentions = document.getElementById("notifications_Mentions").checked;
        data.shared = document.getElementById("notifications_Shared").checked;
        data.email = document.getElementById("notifications_Email").checked;
        data.push = document.getElementById("notifications_Push").checked;
        data.desktop = document.getElementById("notifications_Desktop").checked;
        data.summary = document.getElementById("notifications_summary").checked;
        data.user = user;

       const addProfile = await postData(serverUrl+ "/api/settings/notifications", data);
       console.log("Post status: ", addProfile)
    });

     document.getElementById("devices-form").addEventListener('submit', async e => {
       e.preventDefault();
       let data = {}
        data.microphone = document.getElementById("devices_microphone").value;
        data.speaker = document.getElementById("devices_speaker").value;
        
        data.user = user;

       const addProfile = await postData(serverUrl+ "/api/settings/devices", data);
       console.log("Post status: ", addProfile)
    });

    document.getElementById("privacy-form").addEventListener('submit', async e => {
       e.preventDefault();
       let data = {}
        data.trash = document.getElementById("privacy_trash").value;
        data.sharing = document.getElementById("privacy_sharing").checked;
        data.recording = document.getElementById("privacy_recording").checked;
        
        data.user = user;

       const addProfile = await postData(serverUrl+ "/api/settings/privacy", data);
       console.log("Post status: ", addProfile)
    });

   

    
    //upload profile pic
    const form = document.getElementById('profile_pic_upload');
    const status = document.getElementById('status');

    form.addEventListener('click', async (event) => {
      event.preventDefault(); // Prevent page reload

      const fileInput = document.getElementById('file');
      const file = fileInput.files[0];



      const formData = new FormData();
      formData.append('file', file);
      formData.append('user', user);

      status.textContent = 'Uploading...';

      try {
        const res = await fetch(serverUrl+'/api/settings/profile_pic', {
          method: 'POST',
          body: formData
        });

        const data = await res.json();

        if (res.ok) {
          status.textContent = `Upload successful!`;
          loadProfile();
        } else {
          status.textContent = `Error: ${data.message}`;
        }
        
       

      } catch (err) {
        console.error('Upload error:', err);
        status.textContent = 'Upload failed.';
      }
         setTimeout(() => {
          status.textContent = '';
        }, 5000);

    });

     const removePic = document.getElementById('profile_pic_remove');
    removePic.addEventListener('click', async (event) => {
      event.preventDefault(); // Prevent page reload

    

      try {
        const res = await fetch(serverUrl+'/api/settings/profile_pic?user='+user, {
          method: 'DELETE'
        });

        const data = await res.json();

        if (res.ok) {
          status.textContent = `Deleted successfully!`;
          document.getElementById('profile-img').src = 'https://i.pravatar.cc/40?img=5';
          document.getElementById('header_profilePic').src = 'https://i.pravatar.cc/40?img=5';
        } else {
          status.textContent = `Error: ${data.message}`;
        }
        
       

      } catch (err) {
        console.error('Deletion error:', err);
        status.textContent = 'Deletion failed.';
      }
         setTimeout(() => {
          status.textContent = '';
        }, 5000);

    });

  </script>
</body>
</html>